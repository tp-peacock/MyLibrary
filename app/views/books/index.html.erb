<% provide(:title, "Books List") %>

<!DOCTYPE html>
<html>
<head>
	<title><%= yield(:title) %> Books List</title>
</head>
<body>

<%= link_to("Home", {:controller => 'home', :action => 'index'}) %>

<a class="click2" href="#" >CLICK</a>

<h2>Books List</h2>

<font color="red"><strong>
<% if flash[:notice] %>
	<p align="center">
	  <%= flash[:notice] %>
	</p>
<% end %>
</strong></font>

<div align="center">
	 <a href='#' id="show_create_book_form">Add a New Book</a>
			<div class="create_book_form">
				<%= form_for(:book, :url => {:action => 'create'}) do |f| %>
					<%= render(:partial => "form", :locals => {:f => f}) %>
					<br />
				<% end %>
			</div>



<div align="center">
	<p><%= link_to('Show All Books', {:controller => 'books', :action => 'index'}) %><br /></p>
	<%= form_for(:search, :url => {:action => 'search'}) do |f| %>
		<%= f.text_field(:query) %>
		<button type="submit" class= "btn btn-default btn-xs">
			Search
		</button>
	<% end %>	
</div>
<br />

<div align="center">
<%= form_for(:filter, :url => {:action => 'filter'}) do |f| %>
	<table style="width:20%" align="center" class="table table-condensed">
		<thead>
			<tr>
				<th class="text-center">Physical</th>
				<th class="text-center">E-Book</th>
				<th class="text-center">Read</th>
				<th>&nbsp;</th>
			</tr>
		</thead>
		<tbody>
			<tr>
				<td class="text-center"><%= f.check_box(:physical) %></td>
				<td class="text-center"><%= f.check_box(:ebook) %></td>
				<td class="text-center"><%= f.check_box(:read) %></td>
				<td>
					<button type="submit" class= "btn btn-default btn-xs">
						Filter
					</button>
				</td>
			</tr>
		</tbody>
<% end %>
		


<div class"book-table">
	<table style="width:80%" align="center" class="table table-hover">
		<thead>
			<tr>
				<th><%= link_to(sortable "position") %></th>
				<th><%= link_to(sortable "title") %></th>
				<th><%= link_to(sortable "author") %></th>
				<th class="text-center">Physical</th>
				<th class="text-center">E-Book</th>
				<th class="text-center">Read</th>
				<th colspan='2'>&nbsp;</th>
			</tr>
		</thead>
		<tbody>

			<%= form_for(:book, :url => {:action => 'create'}) do |f| %>
				<tr class "hidden-row" style="display:none;">
					<td>								
						<div><%= f.text_field(:position) %></div>
					</td>
					<td>
						<div><%= f.text_field(:title) %></div>
					</td>
					<td>
						<div><%= f.text_field(:author) %></div>
					</td>
					<td class="text-center">
						<div><%= f.check_box(:physical) %></div>
					</td>
					<td class="text-center">
						<div><%= f.check_box(:ebook) %></div>
					</td>
					<td class="text-center">
						<div><%= f.check_box(:read) %></div>
					</td>
					<td>
						<div>
							<button type="submit" class= "btn btn-default btn-xs">
								<% if action_name == 'index' %> 
									Add Book
								<% elsif action_name == 'edit' %>
									Edit Book
								<% else %>
									Save
								<% end %>	
							</button>
						</div>
					</td>

					

				</tr>
			<% end %>	

			<% @books.each do |book| %>
				<tr>
					<td><%= book.position %></td>
					<td><%= book.title %></td>
					<td><%= book.author %></td>
					<td class="text-center"><%= book.physical ? "\u2713" : "\u25A2" %></td>
					<td class="text-center"><%= book.ebook ? "\u2713" : "\u25A2" %></td>
					<td class="text-center"><%= book.read ?  "\u2713" : "\u25A2" %></td>
					<td class="text-center"><%= link_to("Edit", {:action => 'edit', :id => book.id}) %>
					<td class="text-center"><%= link_to("Delete", {:action => 'destroy', :id => book.id, :class => 'btn btn-mini btn-danger' } ) %>
				</tr>
			<% end %>
		</tbody>
	</table>
</div>

</body>
</html>

<script>
		$(function() {
  	$('a#show_create_book_form').click(function(event){
    	event.preventDefault();
    	if($('.hidden-row').is(':hidden')){
            $('.hidden-row div').css('display','none');
            $('.hidden-row').css('display','table-row').find('div').slideDown(1000);
    	}
    	else{
        $('.hidden-row div').slideUp(1000, function(){$('.hidden-row').hide()});         
    	}
    	$('div.create_book_form').slideDown();
  	});
	});
</script>

<script>
		$('body').on('click','.click2',function(e){
    e.preventDefault();
    	if($('.hidden-row').is(':hidden')){
            $('.hidden-row div').css('display','none');
            $('.hidden-row').css('display','table-row').find('div').slideDown(1000);
    	}
    	else{
        $('.hidden-row div').slideUp(1000, function(){$('.hidden-row').hide()});         
    	}
  	});
</script>





